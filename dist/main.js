(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,c,a,i,s,l,u,d,f,m,v,y;d=document.querySelector(".btn-order-call"),f=document.querySelector(".header-modal"),m=document.querySelector(".overlay"),v={count:150,speed:10,start:150,end:0},y=function e(){v.start>v.end?v.count-=v.speed:v.count+=v.speed,f.style.transform="translateX(".concat(v.count,"px)"),(v.start>v.end?v.count>v.end:v.count<v.end)&&requestAnimationFrame(e)},d.addEventListener("click",(function(){m.style.display="block",screen.width>768&&(v.count=v.start,f.style.display="",requestAnimationFrame(y))})),m.addEventListener("click",(function(e){var t=e.target;t.classList.contains("header-modal__close")?m.style.display="none":(t=t.closest(".header-modal"))||(m.style.display="none")})),function(){var e=document.querySelector(".benefits-inner"),t=document.querySelector(".benefits-wrap"),n=document.querySelectorAll(".benefits__item"),o=document.querySelector(".benefits__arrow--left"),r=document.querySelector(".benefits__arrow--right");if(e.style.overflow="hidden",t.style.marginLeft="inherit",screen.width<=1220){var c=0,a=n.length,i=e.clientWidth/1,s=1*i;n.forEach((function(e){e.style.minWidth="".concat(i,"px")})),r.addEventListener("click",(function(){var e=a-(Math.abs(c)+1*i)/i;c-=e>=1?s:e*i,l()})),o.addEventListener("click",(function(){var e=Math.abs(c)/i;c+=e>=1?s:e*i,l()}));var l=function(){t.style.transform="translateX(".concat(c,"px)")}}else{var u=0,d=n.length,f=e.clientWidth/3,m=3*f;n.forEach((function(e){e.style.minWidth="".concat(f,"px")})),r.addEventListener("click",(function(){var e=d-(Math.abs(u)+3*f)/f;u-=e>=3?m:e*f,v()})),o.addEventListener("click",(function(){var e=Math.abs(u)/f;u+=e>=3?m:e*f,v()}));var v=function(){t.style.transform="translateX(".concat(u,"px)")}}}(),a=document.querySelectorAll(".service-button"),i=document.querySelector(".services-modal"),s=document.querySelector(".overlayTwo"),l={count:150,speed:10,start:150,end:0},u=function e(){l.start>l.end?l.count-=l.speed:l.count+=l.speed,i.style.transform="translateX(".concat(l.count,"px)"),(l.start>l.end?l.count>l.end:l.count<l.end)&&requestAnimationFrame(e)},a.forEach((function(e){e.addEventListener("click",(function(){s.style.display="block",screen.width>768&&(l.count=l.start,i.style.display="",requestAnimationFrame(u))}))})),s.addEventListener("click",(function(e){var t=e.target;t.classList.contains("services-modal__close")?s.style.display="none":(t=t.closest(".services-modal"))||(s.style.display="none")})),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"25 October 2021",n=document.querySelectorAll(".count_1 span"),o=document.querySelectorAll(".count_2 span"),r=document.querySelectorAll(".count_3 span"),c=document.querySelectorAll(".count_4 span"),a=function(){var e=(new Date(t).getTime()-(new Date).getTime())/1e3,n=Math.floor(e%60),o=Math.floor(e/60%60),r=Math.floor(e/60/60);return{timeRemaining:e,day:Math.floor(e/60/60/24),hours:r,minutes:o,second:n}},i=function(){var t=a();t.timeRemaining>0?(n.forEach((function(e){e.textContent=("0"+t.day).slice(-2)})),o.forEach((function(e){e.textContent=("0"+t.hours).slice(-2)})),r.forEach((function(e){e.textContent=("0"+t.minutes).slice(-2)})),c.forEach((function(e){e.textContent=("0"+t.second).slice(-2)}))):(clearInterval(e),n.forEach((function(e){e.textContent="00"})),o.forEach((function(e){e.textContent="00"})),r.forEach((function(e){e.textContent="00"})),c.forEach((function(e){e.textContent="00"})))};i(),e=setInterval(i,1e3)}(),n=document.querySelectorAll("[name=fio]"),o=document.querySelectorAll("[name=phone]"),r=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Введите корректные данные";""!==e.value&&(e.value.match(t)||(alert(n),e.value=""))},n.forEach((function(e){e.addEventListener("blur",(function(){r(e),e.value=e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "),c(e,/[A-Za-zА-Яа-яЁё]{2,}/g)}))})),o.forEach((function(e){e.addEventListener("blur",(function(){r(e),c(e,/\+(\d){6,16}$/g)}))})),t=document.querySelector(".smooth-scroll"),window.addEventListener("scroll",(function(){(window.pageYOffset||document.documentElement.scrollTop)>800?t.classList.add("smooth-scroll--active"):t.classList.remove("smooth-scroll--active")})),t.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),function(){var t=function(t){var n;(n=document.getElementById(t).elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})).forEach((function(e){return e.value=""}))},n=function(){var e=document.querySelector(".successError");setTimeout((function(){e.remove(),document.querySelector(".overlay").style.display="none",document.querySelector(".overlayTwo").style.display="none"}),2e3)},o=function(e){var o=document.getElementById(e),c=document.getElementById("calc-total"),a=document.createElement("div"),i=document.createElement("img");a.className="successError",a.style.cssText="font-size: 2rem; color: black;",i.height=50,o.addEventListener("submit",(function(s){s.preventDefault();var l=new FormData(o),u={};l.forEach((function(e,t){u[t]=e})),u.name=c.value,""===u.fio||""===u.phone?alert("Введите данные"):(a.textContent="Загрузка...",i.src="./images/wait/wait.gif",a.insertBefore(i,a.firstChild),o.appendChild(a),r(u).then((function(){a.textContent="Спасибо! Мы скокро с вами свяжемся!",i.src="./images/wait/success.png",a.insertBefore(i,a.firstChild),t(e),n()})).catch((function(o){a.textContent="Что то пошло не так...",i.src="./images/wait/error.png",a.insertBefore(i,a.firstChild),t(e),n(),console.error(o)})))}))};o("form1"),o("form2"),o("form3"),o("form4");var r=function(e){return new Promise((function(t,n){var o=new XMLHttpRequest;o.addEventListener("readystatechange",(function(){4===o.readyState&&(200===o.status?t():n(o.status))})),o.open("POST","./server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))}))}}()})();